Orden,Fase,ID,Bloque,Tarea,Prioridad,Estado,Horas Est.,Descripción Detallada,Nivel Dificultad,Dependencias,Modelo Pricing Referencia,IA Planificación (Ask Mode),IA Ejecución (Agent Mode),IA Corrección
1,Fase 1: Ingesta (El Ojo),1.01,01 Cimientos,Init Next.js 16.1 & TS,Alta,Listo,3.0,"Inicialización Next.js 16.1 con TypeScript + Tailwind + App Router + Turbopack.",Media,,-,-,-,
2,Fase 1: Ingesta (El Ojo),1.02,01 Cimientos,Shadcn/UI v2 Setup,Alta,Listo,3.0,"Shadcn/UI v2 con tema legal profesional. Shell de aplicación para Dashboard y Extensión.",Media,,-,-,-,
3,Fase 1: Ingesta (El Ojo),4.01,04 Scraper,Extension Init (V3),Alta,Listo,6.0,"Chrome Extension Manifest V3 con SidePanel API. Interfaz principal del producto activada en pjud.cl.",Media,,-,-,-,
4,Fase 1: Ingesta (El Ojo),1.03,01 Cimientos,Supabase Auth & Config,Alta,Listo,2.0,"Supabase SSR Auth con middleware + persistencia de sesión entre Extensión y Dashboard.",Media,,-,-,-,
5,Fase 1: Ingesta (El Ojo),2.01,02 Storage,Bucket de Expedientes,Alta,Listo,3.0,"Bucket 'case-files' con RLS policies. Permite subida desde Extensión.",Media,,-,-,-,
6,Fase 1: Ingesta (El Ojo),1.04,01 Cimientos,SQL: Perfiles & RLS,Alta,Listo,7.5,"Tabla profiles con plan_type y contadores mensuales por capa. device_fingerprint para anti-multicuentas. RLS completo.",Alta,,-,-,-,
7,Fase 1: Ingesta (El Ojo),4.03,04 Scraper,Direct Upload API,Alta,Listo,6.0,"API Route /api/upload: recibe PDF blobs desde Extensión → Storage + DB. Race condition protegida por UNIQUE constraint.",Media,,-,-,-,
8,Fase 1: Ingesta (El Ojo),4.06,04 Scraper,Scraper Remote Config,Alta,Listo,3.0,"API Route /api/scraper/config: selectores CSS dinámicos + URL patterns. Soluciona el Ciclo de la Muerte.",Media,,-,-,-,
9,Fase 1: Ingesta (El Ojo),4.07,04 Scraper,Causa Context Detector (ROL Parser),Alta,Reemplazado,5.0,"REEMPLAZADO POR 4.16 (JWT Extractor). Lógica de detección de ROL simplificada: en vez de 6 estrategias heurísticas + fallbacks de storage se lee directamente de table.table-titulos en el DOM visible.",Alta,,-,-,-,
10,Fase 1: Ingesta (El Ojo),4.08,04 Scraper,Scraper Resiliente Layers 1 & 2,Alta,Reemplazado,8.0,"REEMPLAZADO POR 4.16 + 4.17. La nueva arquitectura no manipula el DOM: lee JWTs pasivamente (4.16) y descarga via fetch HTTP server-side (4.17). Network Interceptor y DOM Analyzer obsoletos. Manual upload (Layer 3) se mantiene en 4.03.",Muy Alta,,-,-,-,
11,Fase 1: Ingesta (El Ojo),4.09,04 Scraper,PDF Validator & Causa Filter,Alta,Listo,4.0,"5 filtros: Tamaño → Origen URL → Magic bytes → SHA-256 dedup → ROL tagging + tipo documento. Lógica se migra al server-side en 4.17.",Alta,,-,-,-,
12,Fase 1: Ingesta (El Ojo),4.10,04 Scraper,Human Throttle & Anti-WAF,Alta,Reemplazado,3.0,"REEMPLAZADO POR throttle server-side en 4.17. Los fetch desde API no necesitan distribución gaussiana ni simulación de mouse events. Solo throttle básico (500ms-1s) entre requests.",Media,,-,-,-,
13,Fase 1: Ingesta (El Ojo),4.11,04 Scraper,Sync UI & User Confirmation Flow,Alta,Reemplazado,6.0,"REEMPLAZADO POR 4.18 (Sync UI v2). Nuevo flujo: lectura pasiva DOM → preview → sync en background via API → progreso SSE. Abogado no se bloquea.",Alta,,-,-,-,
14,Fase 1: Ingesta (El Ojo),4.12,04 Scraper,SQL: Document Hashes Table,Alta,Listo,2.0,"Tabla document_hashes con UNIQUE(user_id + hash). Deduplicación server-side persistente.",Media,,-,-,-,
15,Fase 1: Ingesta (El Ojo),4.13,04 Scraper,Re-Sync Awareness & Sync Incremental,Alta,Reemplazado,7.0,"REEMPLAZADO POR 4.19 (Causa Fingerprint). El enfoque de delta simple se reemplaza por fingerprint completo que detecta cambios en todos los cuadernos + anexos + tabs.",Alta,,-,-,-,
16,Fase 1: Ingesta (Scraper v2),4.14,04 Scraper v2,PJUD DOM Mapping & Endpoint Discovery,Alta,En Progreso,4.0,"Tarea manual. Navegar PJUD y capturar HTML comentado de cada estado DOM: DOM1 (tabla resultados #dtaTableDetalle) DOM2 (modal #modalDetalleCivil: metadata + folios + cuadernos) DOM3 (modal Anexos #modalAnexoCausaCivil) DOM4 (tabla tras cambio cuaderno #selCuaderno) DOM5 (modal Receptor #modalReceptorCivil) DOM6 (tabs: Litigantes + Notificaciones + Escritos + Exhortos). Capturar endpoints desde DevTools Network: causaCivil.php (POST dtaCausa+token) + docuS/docuN.php (GET dtaDoc) + docCertificado*.php + newebookcivil.php + endpoint Anexos + endpoint Receptor. ESTADO: DOM1 y DOM2 mapeados. Endpoint causaCivil.php y cambio cuaderno capturados. Falta: DOM3 DOM5 y endpoints de Anexos/Receptor.",Media,,-,-,-,
17,Fase 1: Ingesta (Scraper v2),4.15,04 Scraper v2,JWT Viability Testing (Pruebas A-B-C),Alta,Pendiente,2.0,"Tarea manual. 3 pruebas en Git Bash: A) curl PDF endpoint (docuS.php?dtaDoc=JWT) con cookies PHPSESSID+TS01262d1d → confirmar baseline. B) curl PDF sin cookies → determinar si JWT es autosuficiente (API proxy pura) o necesita sesión (fetch desde extensión). C) curl POST a causaCivil.php con JWT+CSRF token → confirmar acceso a HTML detalle causa. Documentar: tiempos expiración JWT (~1h observado) + comportamiento token CSRF (d4ebad366cfb4ef74fee967f43ee94f2) + cookie F5 WAF (TS01262d1d). Resultado define arquitectura de sync.",Baja,4.14,-,-,-,
18,Fase 1: Ingesta (Scraper v2),4.16,04 Scraper v2,JWT Extractor Module (Extension),Alta,Pendiente,6.0,"Módulo nuevo en extensión. Reemplaza CausaContext (4.07) + DOMAnalyzer (4.08). Lectura PASIVA del DOM visible (cero clics + cero navegación). Extrae: 1) ROL + metadata de table.table-titulos (tribunal + estado adm + procedimiento + etapa + ubicación + fecha ingreso). 2) JWTs de forms directos: Texto Demanda (docu.php) + Certificado Envío (docCertificadoDemanda.php) + Ebook (newebookcivil.php). 3) JWT de Anexos (onclick=anexoCausaCivil). 4) JWTs de cada option en select#selCuaderno (nombre + JWT). 5) JWT de Receptor (onclick=receptorCivil). 6) CSRF token del DOM. 7) Datos tabulares de 5 tabs (ya presentes en HTML del modal). 8) Lista de folios visibles con JWTs de sus forms (doc principal + certificado escrito). 9) Carátula completa desde fila clickeada en DOM1 (#verDetalle). Envía paquete JSON al service-worker → API.",Alta,4.14 + 4.15,-,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Debug | Max ON"
19,Fase 1: Ingesta (Scraper v2),4.17,04 Scraper v2,API Route /api/scraper/sync,Alta,Pendiente,10.0,"API Route /api/scraper/sync (Node.js runtime). Recibe paquete JWT + cookies (si necesarias según 4.15) desde extensión. Pipeline: 1) Registrar/actualizar causa en DB (cases table con ROL+Tribunal+Carátula). 2) Descargar PDFs directos (Texto Demanda + Certificado + Ebook) via GET con JWT. 3) Para cada cuaderno: POST a causaCivil.php con JWT del cuaderno → parsear HTML respuesta → extraer JWTs de cada folio → descargar PDFs (doc principal + certificado escrito por folio). 4) POST a endpoint Anexos con JWT → parsear HTML → descargar archivos. 5) Upload cada PDF a Supabase Storage (case-files) + registrar en documents + document_hashes (SHA-256). 6) Generar fingerprint de la causa (para 4.19). 7) Disparar processing queue (7.05) para extracción de texto. Throttle server-side: 500ms-1s entre requests a PJUD. Deduplicación: skip si hash ya existe. Respuesta SSE/polling para progreso tiempo real. Timeout: 5 min máx por sync. Validación: reusar lógica de 4.09 server-side.",Muy Alta,4.15 + 4.16 + 4.03,-,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
20,Fase 1: Ingesta (Scraper v2),4.18,04 Scraper v2,Sync UI v2 (Sidepanel),Alta,Pendiente,5.0,"Actualización del Sidepanel (reemplaza 4.11). Flujo: 1) Abogado navega a causa en PJUD. 2) Extensión lee DOM pasivamente (4.16) → muestra preview: ROL + tribunal + carátula + N cuadernos + N folios detectados. 3) Si causa ya sincronizada: muestra estado via fingerprint (actualizada / N docs nuevos desde DD/MM/YYYY). 4) Abogado presiona Sincronizar. 5) Extensión envía JWTs al API (4.17). 6) Barra de progreso con SSE: Descargando documento 5/47... + Cuaderno 2 de 3... 7) Resultado: N documentos nuevos + N existentes + N errores. CLAVE UX: abogado puede seguir navegando PJUD durante la sync. Si cierra pestaña sync continúa en servidor.",Alta,4.16 + 4.17,-,"Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 | Debug | Max OFF"
21,Fase 1: Ingesta (Scraper v2),4.19,04 Scraper v2,Causa Fingerprint & Change Detection,Media,Pendiente,6.0,"Detección pasiva de cambios en causas sincronizadas (Etapa 2). AL SINCRONIZAR: generar fingerprint JSON completo de la causa: {cuadernos: {nombre: {maxFolio + totalFolios + folioHashes:[]}}} + anexos: {count + hashes} + litigantes: {count + hash} + notificaciones: {count} + escritos: {count} + exhortos: {count} + directDocs: {textoDemanda + certificado + ebook}. SQL: tabla causa_fingerprints (causa_id FK + user_id + fingerprint JSONB + created_at). AL REVISITAR: extensión lee DOM visible → genera fingerprint parcial (maxFolio + count cuadernos + count tabs) → GET /api/scraper/check-status → compara con fingerprint guardado → muestra en sidepanel: Hay N documentos nuevos desde última sync ¿Actualizar? Lectura pasiva sin requests adicionales a PJUD.",Alta,4.17,-,"Opus 4.6 Max (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max OFF"
22,Fase 1: Ingesta (Scraper v2),4.20,04 Scraper v2,Soporte DOMs adicionales (Receptor + Geo + Tabs),Baja,Pendiente,4.0,"Soporte incremental para secciones PJUD no incluidas en sync MVP. Requiere completar mapeo DOM (4.14). Secciones: 1) Modal Receptor (#modalReceptorCivil): información notificaciones receptor + certificaciones + diligencias. Endpoint: receptorCivil(JWT). 2) Modal Georreferencia (#modalGeoReferenciaCivil): ubicación geográfica de diligencias judiciales (mapa). Endpoint: geoReferencia(JWT). 3) Datos tabulares de tabs no descargados: Notificaciones (estado + tipo + fecha + resultado + obs fallida) + Escritos por Resolver (pendientes del tribunal con fecha ingreso) + Exhortos (rol origen + destino + tribunal + estado). Cada sección: mapeo DOM → actualizar JWT Extractor (4.16) → agregar parsing en API Sync (4.17) → almacenar datos en DB. Implementar tras validar MVP con cuadernos + anexos + docs directos.",Media,4.17,-,"Sonnet 4.5 (cerebro) | Max OFF","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 | Debug | Max OFF"
23,Fase 2: Digestión (Pipeline),7.01,07 Pipeline,SQL: UNIQUE Constraint Cases,Alta,Listo,5.0,"UNIQUE INDEX en cases(user_id + rol + COALESCE(tribunal) + COALESCE(caratula)). Migración 20260213140000. Upload route con manejo de constraint violation.",Alta,4.12,-,-,-,
24,Fase 2: Digestión (Pipeline),7.02,07 Pipeline,SQL: Tabla extracted_texts + document_chunks,Alta,Listo,4.0,"Dos tablas nuevas. 1) extracted_texts: texto plano extraído por PDF (document_id FK + full_text + extraction_method ['pdf-parse'|'document-ai'] + page_count + status). 2) document_chunks: fragmentos para RAG (extracted_text_id FK + case_id FK + chunk_index + chunk_text + page_number + section_type + metadata JSONB). RLS por user_id. Índices en case_id y document_id.",Alta,7.01,,"GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max OFF"
25,Fase 2: Digestión (Pipeline),7.03,07 Pipeline,PDF Native Text Extraction (pdf-parse),Alta,Listo,4.0,"Módulo que extrae texto de PDFs nativos usando pdf-parse v2.4.5 (gratis Apache-2.0). Si texto < 50 chars/página → marca como 'necesita OCR'. Guardar en extracted_texts. Costo: $0.",Media,7.02,,"GPT-5.3 Codex High (cerebro) | Max OFF","GPT-5.3 Codex High (cerebro) | Max OFF","GPT-5.3 Codex Fast (cerebro) | Debug | Max OFF"
26,Fase 2: Digestión (Pipeline),7.04,07 Pipeline,Google Document AI OCR Integration,Alta,Listo,6.0,"SDK @google-cloud/documentai. Para PDFs escaneados. PDF → base64 → processDocument() → texto + metadata por página. Configurar GCP: procesador OCR + service account. PDFs grandes: dividir en lotes de 15 páginas. Costo: $1.50/1000 páginas.",Alta,7.03,,"Gemini 3 Pro (cerebro) | Max OFF","GPT-5.3 Codex High (cerebro) | Max OFF","Gemini 3 Pro (cerebro) | Debug | Max OFF"
27,Fase 2: Digestión (Pipeline),7.05,07 Pipeline,PDF Processing Orchestrator (Edge Function),Alta,Listo,7.0,"Edge Function que orquesta extracción. Trigger al registrar documento. 1) Descargar PDF. 2) Intentar pdf-parse. 3) Si falla → Document AI. 4) Guardar en extracted_texts. 5) Queue con reintentos (max 3). PDFs >50MB → lotes. Propagar ROL + case_id + tipo como metadata.",Muy Alta,7.03 + 7.04,,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
28,Fase 2: Digestión (Pipeline),7.06,07 Pipeline,pgvector Extension + Document Embeddings,Alta,Listo,4.0,"Habilitar pgvector en Supabase. Tabla document_embeddings: chunk_id FK + case_id FK + embedding vector(768). Índice HNSW. RLS por user_id. CRÍTICO: índice debe soportar filtrado por case_id para RAG por causa.",Alta,7.02,"Embeddings: text-embedding-004 ($0.00625/1M tokens)","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max OFF"
29,Fase 2: Digestión (Pipeline),7.07,07 Pipeline,Legal-Aware Chunking Pipeline (Civil Chileno),Alta,Pendiente,8.0,"Chunking especializado para documentos legales civiles chilenos. Detectar estructura por tipo procesal: Resolución judicial: Vistos → Considerandos → Resolutivos (Art. 170 CPC). Sentencia: Parte expositiva → Considerativa → Resolutiva. Escrito procesal: Suma → En lo principal → Otrosí(es) → Petitorio. Demanda civil: Presupuestos procesales → Hechos → Derecho (Art. 254 CPC) → Peticiones. Actuación receptor: Certificación → Diligencia → Resultado. Auto acordado / Decreto: dispositivo breve. Dividir por límites semánticos respetando secciones. 512-1024 tokens con 15% overlap. Metadata: case_id + document_id + page_number + section_type + cuaderno + folio. INVESTIGAR: Summary-Augmented Chunking (SAC) arxiv 2510.06999.",Muy Alta,7.05,,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
30,Fase 2: Digestión (Pipeline),7.08,07 Pipeline,Embedding Generation Pipeline,Alta,Pendiente,5.0,"Embeddings con text-embedding-004 de Google. Lotes de 100 chunks. Trigger al completar chunking de una causa. Cola para rate limits. Embeddings de metadata enriquecida (chunk + tipo + causa + página + cuaderno + folio).",Alta,7.06 + 7.07,"text-embedding-004: ~$0.003 por causa 500 págs","GPT-5.3 Codex High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Max ON","GPT-5.3 Codex Fast (cerebro) | Debug | Max OFF"
31,Fase 2: Digestión (Cerebro),3.01,03 Cerebro,Gemini SDK 3-Layer Model Routing,Alta,Pendiente,5.0,"SDK @google/generative-ai con routing 3 capas. src/lib/gemini.ts: getModel(mode). CAPA 1: gemini-3-flash ($0.50/$3.00). CAPA 2: gemini-3-flash con long context + caching. CAPA 3: gemini-3-pro con thinking ($2/$12 ≤200K; $4/$18 >200K). Una API key. Config por capa: max_input_tokens + temperature + system_prompt_template.",Alta,,"Flash $0.50/$3.00 | Pro $2/$12 (≤200K)","Gemini 3 Pro (cerebro) | Max OFF","GPT-5.3 Codex High (cerebro) | Max OFF","Gemini 3 Pro (cerebro) | Agent | Max OFF"
32,Fase 2: Digestión (Cerebro),3.05,03 Cerebro,Gemini Context Caching Setup,Alta,Pendiente,4.0,"Context caching para Capas 2 y 3. Explicit caching: documentos de causa con TTL 30min. Al iniciar análisis → crear cache → reutilizar. 90% descuento. Mínimo: 1024 tokens (Flash) / 4096 tokens (Pro). Implicit caching para queries repetitivas. Monitorear uso.",Alta,3.01,"Context caching: 90% descuento","Gemini 3 Pro (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Max ON","Gemini 3 Pro (cerebro) | Debug | Max OFF"
33,Fase 2: Digestión (Cerebro),3.10,03 Cerebro,SQL: Chat History & Conversations Schema,Alta,Pendiente,3.0,"Tablas: 1) conversations: id + case_id FK + user_id + title + mode ('fast_chat'|'full_analysis'|'deep_thinking') + created_at + updated_at. 2) chat_messages: id + conversation_id FK + role ('user'|'assistant') + content + sources_cited JSONB + tokens_input int + tokens_output int + model_used text + latency_ms int + created_at. RLS por user_id. Índices: conversation_id + created_at para historial ordenado.",Alta,7.02,,"GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max OFF"
34,Fase 2: Digestión (Cerebro),3.12,03 Cerebro,Claude Sonnet 4 SDK Integration,Alta,Pendiente,3.0,"SDK Anthropic (@anthropic-ai/sdk) para Editor de Escritos (3.03). src/lib/claude.ts: getClaudeResponse(prompt + context + options). Prompt caching habilitado para templates de escritos civiles (input cacheado: $0.30/M tokens = 90% descuento). Streaming habilitado. Separado de Gemini SDK (3.01): Gemini para RAG/Chat + Claude para redacción legal. Configuración: API key + rate limiting + error handling + streaming response. Costo estimado: ~$3-5/mes por firma (50 escritos/mes de ~5 páginas).",Media,,"Claude Sonnet 4: $3/$15 por M tokens. Cache: $0.30 input","Opus 4.6 Max (cerebro) | Max OFF","GPT-5.3 Codex High (cerebro) | Max OFF","GPT-5.3 Codex Fast (cerebro) | Debug | Max OFF"
35,Fase 2: Digestión (Cerebro),3.02,03 Cerebro,RAG Pipeline — Capa 1: Fast Chat (Civil),Alta,Pendiente,10.0,"Pipeline RAG para causas civiles chilenas. 1) Pregunta + case_id obligatorio. 2) Embedding pregunta. 3) Vector search FILTRADA por case_id + filtro opcional por tipo documento (resolución/escrito/actuación/notificación) y cuaderno. 4) Retrieval híbrido: vector (top-10) + full-text BM25 en Postgres. 5) Reranking: relevancia combinada + priorización temporal (docs recientes primero para consultas de estado procesal). 6) Top-5 chunks + system prompt civil chileno → gemini-3-flash. 7) Respuesta con citas (foja + fecha + tipo + cuaderno). Multi-query decomposition para preguntas procesales complejas (ej: ¿se notificó correctamente? cruza actuación receptor + certificación + plazo Art. 258 CPC).",Muy Alta,7.08 + 3.01 + 3.10,,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
36,Fase 2: Digestión (Cerebro),3.06,03 Cerebro,Capa 2: Full Analysis (Long Context + Flash),Alta,Pendiente,6.0,"Análisis cross-document para causas civiles. RAG top-20 + documentos clave completos (demanda + contestación + últimas resoluciones del cuaderno principal) + caching → gemini-3-flash long context. Límite: Individual 150/mes | Estudio 500/mes | Enterprise 1500/mes. ~$0.015/query.",Alta,3.02 + 3.05,"~$0.015/query con cache","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
37,Fase 2: Digestión (Cerebro),3.07,03 Cerebro,Capa 3: Deep Thinking (Long Context + Pro),Alta,Pendiente,6.0,"Razonamiento profundo. RAG top-20 + contexto extenso + gemini-3-pro thinking + caching. CoT: Marco legal (CPC + CC) → Artículos aplicables → Hechos del expediente → Análisis procesal → Conclusión + riesgos. Límite: Individual 30/mes | Estudio 100/mes | Enterprise 300/mes. ~$0.13/query.",Alta,3.02 + 3.05,"~$0.13/query con cache","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
38,Fase 2: Digestión (Cerebro),3.08,03 Cerebro,Chat UI 3 Modos en Sidepanel + Dashboard,Alta,Pendiente,10.0,"3 modos: Chat Rápido (rayo) / Análisis Completo (lupa) / Pensamiento Profundo (cerebro). Requiere causa seleccionada. Acciones rápidas predefinidas para causas civiles: Resumen del estado actual + Cronología de actuaciones + ¿Cuáles son los próximos plazos? + ¿Se notificó correctamente al demandado? + Documentos clave pendientes + ¿Qué recursos proceden? Contador uso mensual. Streaming SSE. Historial por causa (conversations + chat_messages). Sidepanel principal + Dashboard secundario. Sección Fuentes obligatoria en cada respuesta.",Muy Alta,3.06 + 3.07 + 3.10,,"Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 | Agent | Max ON"
39,Fase 2: Digestión (Cerebro),3.09,03 Cerebro,Citation System (Foja + Cuaderno + Documento),Alta,Pendiente,6.0,"Citas automáticas adaptadas a práctica civil chilena en TODA respuesta. Formato: Según [Resolución/Escrito/Actuación] de fecha [DD/MM/YYYY] folio [N] cuaderno [nombre] (pág. N)... Cada chunk incluye metadata [DOC: tipo | FOLIO: N | CUADERNO: X | PÁG: N | SECCIÓN: vistos/considerandos/resolutivos]. Post-procesamiento: parsear citas → links clickeables al PDF con scroll a página. Sidebar de fuentes agrupadas por tipo y fecha. CRÍTICO para adopción por abogados civiles que verifican cada dato.",Alta,3.08,,"Opus 4.6 Max (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max ON"
40,Fase 2: Digestión (Cerebro),3.11,03 Cerebro,PDF Viewer Component (Sidepanel + Dashboard),Alta,Pendiente,6.0,"Visor de PDF embebido usando pdf.js o react-pdf. 1) Renderizar PDF desde Supabase Storage. 2) Navegación por páginas. 3) Scroll automático a página citada cuando el abogado clickea una fuente del chat. 4) Highlight de texto relevante (opcional). 5) Responsive para Sidepanel (ancho limitado). 6) Lazy loading para PDFs grandes.",Alta,3.09,,"Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 | Debug | Max OFF"
41,Fase 2: Digestión (Cerebro),3.04,03 Cerebro,Prompt Engineering Legal Civil Chileno,Alta,Pendiente,8.0,"System prompts especializados en derecho procesal civil chileno. Terminología obligatoria: fojas + carátula + ROL + cuaderno + proveído + despacho + mandamiento + exhorto + receptor + cédula. Estructura procesal: juicio ordinario (demanda → excepciones dilatorias → contestación 18d Art.258 → réplica → dúplica → conciliación → prueba → observaciones → sentencia) + juicio ejecutivo (demanda ejecutiva → mandamiento ejecución y embargo → excepciones → sentencia) + juicio sumario (demanda → audiencia contestación y conciliación → prueba → sentencia). PERFILES: Juez civil (Art. 160-170 CPC + imparcial + fundamentos de hecho y derecho) + Abogado litigante civil (estrategia procesal + plazos fatales: contestación 18d Art.258 + apelación 5d Art.189 + casación 15d Art.770) + Revisor de plazos y notificaciones. Filtro causa: responder SOLO con info de la causa (case_id). Calibración iterativa con causas civiles reales de PJUD.",Alta,3.09,,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Agent | Max ON"
42,Fase 4: Frontend,3.03,03 Cerebro,Editor de Escritos con IA (Claude Sonnet 4),Alta,Pendiente,12.0,"Editor rich text (Tiptap/Slate) en Sidepanel. IA usa Claude Sonnet 4 ($3/$15 por M tokens; con cache $0.30 input) — mejor modelo para redacción legal formal (benchmarks 2026: menos alucinaciones + mejor prosa jurídica + detección cláusulas problemáticas). Funcionalidades derecho civil chileno: Redactar escrito procesal (demanda Art.254 CPC + contestación + réplica + dúplica + recursos apelación Art.186/casación Art.764). Reescribir en lenguaje jurídico formal. Expandir argumento con fundamentos legales CPC y CC. Citar jurisprudencia de la causa. Templates escritos civiles: Suma + En lo principal + Otrosí + Petitorio. Acceso al contexto RAG de la causa para citas precisas. Inline completions + menú contextual.",Muy Alta,3.02 + 3.12,"Claude Sonnet 4: ~$0.05 por escrito 10 págs","Opus 4.6 Max (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Debug | Max ON"
43,Fase 3: Producción (Escudo),4.04,04 Seguridad,Middleware: Limits & Rate Guard (4 Planes),Alta,Pendiente,7.0,"Rate limiting anti-bot (Upstash/Redis: 20 req/min). Lógica 4 planes: FREE(1 causa/20 fast/0 full/3 deep lifetime) | INDIVIDUAL $99(100/1000 Fair Use/150/30) | ESTUDIO $249(300/3000/500/100) | ENTERPRISE $499(500/8000/1500/300). Soft cap + throttle 30s para fast_chat. Hard cap para full_analysis y deep_thinking.",Alta,1.04,"Individual $99 | Estudio $249 | Enterprise $499","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max ON"
44,Fase 3: Producción (Escudo),4.05,04 Seguridad,Fingerprinting Shield,Alta,Pendiente,3.0,"FingerprintJS en Auth. Genera visitorId. Si dispositivo ya usó Free → bloquear nueva cuenta gratuita → redirect a Pricing.",Media,1.03,,"GPT-5.3 Codex High (cerebro) | Max OFF","Sonnet 4.5 (cerebro) | Max OFF","GPT-5.3 Codex Fast (cerebro) | Agent | Max OFF"
45,Fase 3: Producción (Escudo),6.03,06 Legal,Privacy Consent Modal (Sidepanel),Alta,Pendiente,3.0,"Modal obligatorio ANTES de primera sincronización de causa. Casillas: docs civiles no reservados + autoriza análisis PJud + reconoce IA. Persiste en DB. Aparece antes de JWT Extractor (4.16).",Media,4.16,,"Sonnet 4.5 | Max OFF","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 | Agent | Max OFF"
46,Fase 3: Producción (Escudo),2.02,02 Privacidad,Privacy: Vertex AI + Anthropic Logs Disabled,Alta,Pendiente,1.5,"Deshabilitar data logging y model training en Vertex AI / Google AI Studio y Anthropic API. Protege privilegio abogado-cliente. Aplica tanto para Gemini (RAG/Chat) como Claude (Editor).",Alta,,,"Gemini 3 Pro (cerebro) | Max OFF","Gemini 3 Pro (cerebro) | Max OFF","Gemini 3 Pro (cerebro) | Agent | Max OFF"
47,Fase 3: Producción (Escudo),2.05,02 Storage,The Reaper (Cron Job),Alta,Pendiente,3.0,"pg_cron nocturno. DELETE storage + extracted_texts + document_chunks + document_embeddings + conversations + chat_messages + causa_fingerprints de FREE con last_active > 7 días. PRESERVAR profile + metadata causa (ghost card). Limpiar caches expirados.",Media,7.02 + 3.10 + 4.19,,"GPT-5.3 Codex High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max OFF"
48,Fase 4: Frontend,5.01,05 Frontend,Vistas de Casos (Extensión + Dashboard),Alta,Pendiente,12.0,"Sidepanel + Dashboard. Real-time (Supabase subscriptions). useOptimistic React 19. Agrupar por causa (ROL + Tribunal). Organizar por cuaderno y dentro de cuaderno por tipo (resoluciones/escritos/actuaciones/notificaciones). Mostrar folio + fecha + descripción trámite por documento. Indicadores: estado pipeline (pendiente OCR/procesando/listo IA) + estado sync (sincronizado/desactualizado/N docs nuevos vía fingerprint 4.19). Capa disponible según plan.",Muy Alta,7.05 + 4.19,,"Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 (cerebro) | Max ON","Sonnet 4.5 | Debug | Max ON"
49,Fase 4: Negocio,6.04,06 Negocio,SQL: Plans Schema Update (4 Planes + OCR),Alta,Pendiente,3.0,"Actualizar profiles: monthly_full_analysis_count + monthly_full_analysis_limit + max_causes. plan_type CHECK: 'free'|'individual'|'estudio'|'enterprise'. Tabla ocr_usage: pages_processed + monthly_pages. check_user_limits() para 3 capas × 4 planes. Soft cap fast_chat + hard cap full_analysis/deep_thinking.",Alta,1.04,"Free(1/20/0/3) | Ind(100/1000/150/30) | Est(300/3000/500/100) | Ent(500/8000/1500/300)","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max OFF"
50,Fase 4: Negocio,6.05,06 Negocio,Multi-User Team Management,Alta,Pendiente,12.0,"Tablas: organizations (id + name + owner_id + plan_type + created_at) + organization_members (org_id + user_id + role ['owner'|'admin'|'member'] + invited_at + accepted_at). Flujo: owner crea organización → invita por email → miembro acepta → hereda plan de la org. Causas compartidas dentro del equipo (RLS por org_id). Dashboard admin: gestionar miembros + ver uso por miembro. Billing centralizado: un Stripe subscription por organización. CRÍTICO: Plan Individual = 1 usuario (sin org). Estudio = hasta 5. Enterprise = hasta 15.",Muy Alta,6.04,,"Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 Max (cerebro) | Max ON","Opus 4.6 (cerebro) | Debug | Max ON"
51,Fase 4: Negocio,6.01,06 Negocio,Stripe & Webhooks (3 Planes Pagos),Alta,Pendiente,6.0,"Stripe Wrappers Supabase. 3 suscripciones: Individual $99 + Estudio $249 + Enterprise $499. Webhooks: activar → plan_type + resetear contadores + asignar límites. Cancelar → free + timer Reaper. Estudio/Enterprise: billing por organización (6.05). Dashboard para gestión. Estado consultable desde Extensión.",Alta,6.04 + 6.05,"Márgenes: Individual 76% | Estudio 65% | Enterprise 60%","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max ON"
52,Fase 4: Negocio,5.02,05 Frontend,Landing Page (3 Planes + Pricing),Media,Pendiente,8.0,"Landing high-conversion. Hero + 'Cómo funciona' (Sincronizar→Procesar→Preguntar) + Demo + Pricing (Free/Individual/Estudio/Enterprise). 'Menos de lo que cobra un procurador por una gestión'. Tabla comparativa features. CTA: descargar extensión. Mostrar 3 capas IA como diferenciador.",Media,,,"Sonnet 4.5 | Max OFF","Sonnet 4.5 (cerebro) | Max OFF","Sonnet 4.5 | Agent | Max OFF"
53,Fase 4: Negocio,5.03,05 Frontend,Legal & Terms Pages,Baja,Pendiente,2.0,"Términos de Servicio + Política de Privacidad. Requisito Chrome Web Store. Cláusula procesamiento IA (Gemini + Claude) + limitación responsabilidad + retención (7 días free / permanente pagos).",Baja,,,"Gemini 3 Flash (cerebro) | Max OFF","Sonnet 4.5 | Max OFF","Gemini 3 Flash (cerebro) | Agent | Max OFF"
54,Fase 5: Optimización,1.06,01 Cimientos,Next.js 'use cache' Setup,Alta,Pendiente,4.0,"Directiva 'use cache' en server components para Sidepanel (API) y Dashboard. Cachear: listas causas + datos estáticos + config scraper + fingerprints causa. Priorizar Sidepanel.",Media,5.01,,"GPT-5.3 Codex High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Max ON","GPT-5.3 Codex Fast (cerebro) | Agent | Max OFF"
55,Fase 5: Optimización,6.02,06 Negocio,Analytics PostHog,Baja,Pendiente,2.0,"PostHog privacy-friendly. Eventos: causa_sincronizada + sync_duration + query_fast/full/deep + editor_escrito_generado + ocr_procesado + plan_upgrade + fingerprint_cambio_detectado. Web + Extensión. Dashboard métricas uso por capa.",Baja,,,"GPT-5.3 Codex High (cerebro) | Max OFF","Sonnet 4.5 | Max ON","GPT-5.3 Codex Fast (cerebro) | Agent | Max OFF"
56,Fase 5: Optimización,8.01,08 QA,Test Suite & QA Pipeline,Alta,Pendiente,10.0,"Tests integración: pipeline OCR → chunking → embeddings (texto correcto + chunks respetan estructura legal civil). Tests precisión RAG: 20+ queries legales civiles con respuestas esperadas → evaluar retrieval accuracy + citation correctness + terminología CPC. Tests E2E: flujo sync Extension (JWT Extractor → API Sync → procesamiento → chat con citas). Tests regresión: cambios en prompts no degradan calidad. Tests Editor: escritos generados con Claude respetan estructura procesal civil.",Alta,3.09 + 4.17,,"Opus 4.6 Max (cerebro) | Max ON","GPT-5.3 Codex Extra High (cerebro) | Max ON","GPT-5.3 Codex High (cerebro) | Debug | Max ON"
